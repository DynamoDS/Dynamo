<!--
    There are two versions of this HTML file. One that is part of the Dynamo Dictionary
    codebase and one that is part of the Dynamo codebase, used for displaying additional
    error information in the Dynamo side panel.

    These files need to kept in sync manually: if making edits to one version of the file,
    make sure to update the other version as well.

    Dynamo: https://github.com/DynamoDS/Dynamo
    Dynamo Dictionary: https://github.com/DynamoDS/DynamoDictionary_React
-->
<!-- These headers are required to force the browser embedded in the DocumentationBrowser extension to render in modern IE11 mode. -->

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width initial-scale=1">
    <meta charset="utf-8" />
</head>

<style>body { color: white; font-size: 14px; font-family: "Artifakt Element"; src: url("fonts/ArtifaktElement-Regular.woff") format("woff"); padding: 1%; } a { color: lightgray; cursor: pointer; background-color: transparent; } table { border-collapse: collapse; border: 1px solid white; } th, td { border: 1px solid white; padding-right: 10px; padding-left: 10px; padding-bottom: 10px; padding-top: 10px; } samp { margin-top: 10px; display: block; color: lightgrey; } code .k { color: #dcdcaa; font-weight: bold; } code .s { color: #ce9178; } code .v { color: #b5cea8; } code .o { color: #c586c0; font-weight: bold; } code .i { color: #569cd6; font-weight: bold; } code .b { color: #9cdcfe; font-weight: bold; } code .e { color: #43c9b0; } code  .nl .nl { padding-left: 10px; } code .nl { display: block; } thead { text-align: center; } .hidden-lg { display: none; } .button { background-color: transparent; border-color: #3c3c3c; color: #bbbbbb; } .button:hover { border-color: #656565; background-color: #373737; opacity: 1.0; } .questionmark:after { content: '?'; display: inline-block; font-family: sans-serif; font-weight: bold; text-align: center; font-size: 0.8em; line-height: 0.8em; border-radius: 50%; margin-left: 6px; padding: 0.13em 0.2em 0.09em 0.2em; color: inherit; border: 1px solid; text-decoration: none; } @media screen and (max-width: 600px) { table { width: 100%; } table, th, td { border: none; } tr { border: 1px solid white; display: block; } td, th { display: block; } .hidden-lg { display: block; font-weight: bold; text-align: center; border-bottom: 1px solid white; } .hidden-sm { display: none; } .spaced-sm { margin-top: 20px; } tbody tr:first-of-type { border-bottom: none; } }</style>

<!-- Use inline styles to keep Dynamo Dictionary styling in the dictionary -->
<!-- and custom styling in Dynamo sidepanel. -->

<body style="background-color: #353535; font-family: 'Artifakt Element', 'Open Sans';">
    <form action="https://forum.dynamobim.com/t/new-feature-preview-python-3-support-issue-thread/51649"><input type="submit" class="button" value="Notificación de problemas con los nodos de Python 3" style="font-size:medium;"/></form>
    <h2>Conversión de Python 2 a Python 3</h2>
    <p>La Python Software Foundation (PSF) dejó oficialmente de ofrecer soporte para Python 2 el 1 de enero de 2020. Desde la versión 2.7, Dynamo ha cambiado a CPython3, un motor de Python que proporciona acceso a Python 3 dentro de Dynamo.</p>
   
    <h3>¿Por qué se ha cambiado la versión de Python?</h3>
    <p>Dynamo, como muchos otros entornos basados en C#, utiliza una herramienta denominada IronPython para desplazar datos entre objetos .NET y secuencias de comandos de Python. Como IronPython no se ha actualizado a Python 3, Dynamo ha pasado a utilizar CPython, el intérprete nativo estándar de Python.</p>
    <p>El cambio de Dynamo a Python 3 permite a los usuarios de Dynamo acceder a las bibliotecas modernas más populares y seguir accediendo a las nuevas funciones de la plataforma, el mantenimiento esencial y los parches de seguridad. Además, los gráficos de Dynamo se pueden beneficiar de las bibliotecas de Python con extensiones nativas a las que antes no se podía acceder, como NumPy, SciPy y Pandas.</p>

    <h3>Compatibilidad con versiones anteriores</h3>
    <p>No se garantiza que todo el código escrito en el entorno CPython3 funcione en versiones anteriores de Dynamo. Los autores de código deben garantizar la compatibilidad con versiones anteriores de IronPython2 y CPython3, según se desee.</p>
    
    <h3>¿Qué implica esto para usted y para los gráficos que contienen Python?</h3>
    <p>Si no es el autor del gráfico o de los nodos de Python que contiene, póngase en contacto con el autor y comuníquele estos cambios para que pueda realizar las modificaciones necesarias.</p>
    <p>Si es el autor del gráfico, lea las directrices indicadas a continuación para obtener información sobre cómo estos cambios pueden afectar a los nodos de Python y cómo realizar las actualizaciones.</p>

    <p>Python 3 es básicamente el mismo idioma que Python 2, con cambios en la sintaxis y en la biblioteca principal para que Python sea más coherente y fácil de aprender, y para proporcionar una compatibilidad con Unicode mejorada.</p>
    <p>Algunos programas de Python 2 se ejecutarán con normalidad en Python 3, pero muchos componentes fijos comunes requerirán pequeños cambios, incluida la instrucción de impresión. Por suerte, muchos de ellos se pueden automatizar.</p>

    <h3>Cómo actualizar los nodos de Python a Python 3 </h3>
    <p>Por lo general, las secuencias de comandos de Python se pueden ejecutar mediante los motores IronPython2 o CPython3. En los casos en que la secuencia de comandos contenga sintaxis que haya cambiado entre versiones, hemos simplificado la actualización de la secuencia de comandos mediante la inclusión de un conversor de código automático en el nodo de Python denominado Asistente de migración.</p>
    <p>Para actualizar la secuencia de comandos con el Asistente de migración, abra el editor de nodos de Python, cambie al motor CPython3 mediante el menú desplegable y haga clic en el icono 2-3. Dynamo le informará de los cambios necesarios y le ofrecerá la opción de rechazar o aceptar la conversión.</p>
    <p>Como el nodo de secuencia de comandos de Python desde cadena simplemente ejecuta el código de Python introducido en él y no proporciona un entorno de editor de texto, no tiene acceso al Asistente de migración. Si desea utilizar esta función, deberá copiar y pegar temporalmente el código en un nodo de Python antes de copiarlo y pegarlo de nuevo en el nodo de bloque de código.</p>

    <h3>Más información</h3>
    <p>Si tiene curiosidad por profundizar en las diferencias entre las dos versiones de Python, a continuación se indican dos vínculos externos para empezar:<ul>
            <li><a href="https://docs.python.org/3/howto/pyporting.html">La guía oficial de conversión &quot;Porting Python 2 Code to Python 3&quot;</a></li>
            <li><a href="http://python3porting.com/">La guía detallada &quot;Support Python 3: An in-depth guide&quot;</a></li>
        </ul>
    </p>

    <h3>Cambios clave de la sintaxis de Python 3</h3>
    <p>En la siguiente lista, se describen algunos de los principales cambios de sintaxis entre Python 2 y Python 3. Esta es la selección de algunas de las funciones más utilizadas que se han visto afectadas, no una lista exhaustiva.</p>


    <h4><b>Función de impresión</b></h4>
    <p>La sintaxis de impresión es probablemente el cambio más conocido. Aunque no se suele utilizar en Dynamo, a continuación se muestra un ejemplo que ilustra el cambio de la instrucción <code>print</code>.</p>

    <table>
        <tr>
            <th>Python 2</th>
            <th class="hidden-sm">Python 3</th>
        </tr>
        <tr>
            <td><code><span class="k">print</span> <span class="s">'Hello, Dynamo!'</span></code> <samp>// Hello, Dynamo!</samp></td>
            <th class="hidden-lg" style="border-top: 1px solid white;">Python 3</th>
            <td><code><span class="k">print</span>(<span class="s">'Hello, Dynamo!'</span>)</code> <samp>// Hello, Dynamo!</samp></td>
        </tr>
    </table>

    <h4><b>División de enteros</b></h4>
    <p>Este cambio no generará ninguna excepción en la secuencia de comandos, pero puede afectar al resultado. Cuando se presentan operandos de enteros, el comportamiento por defecto del operador de división en Python 2.x es utilizar la división clásica que suprime los decimales y devuelve un entero. Cuando se asigna un par de operandos de punto flotante, se devuelve el cociente de punto flotante real (o división verdadera).</p>

    <table>
        <tr>
            <th>Python 2</th>
            <th class="hidden-sm">Python 3</th>
        </tr>
        <tr>
            <td><code><span class="v">1</span>/<span class="v">2</span></code> <samp>// 0</samp></td>
            <td class="hidden-lg" style="border-top: 1px solid white;">Python 3</td>
            <td><code><span class="v">1</span>/<span class="v">2</span></code> <samp>// 0.5</samp></td>
        </tr>
        <tr class="spaced-sm">
            <td class="hidden-lg">Python 2</td>
            <td><code><span class="v">1.0</span>/<span class="v">2.0</span></code> <samp>// 0.5</samp></td>
            <td class="hidden-lg" style="border-top: 1px solid white;">Python 3</td>
            <td><code><span class="v">1.0</span>/<span class="v">2.0</span></code> <samp>// 0.5</samp></td>
        </tr>
    </table>

    <h4><b>xrange</b></h4>
    <p><code>xrange</code> se suele utilizar en combinación con instrucciones integrales de lista o bucle. Si solo necesita realizar una iteración, normalmente es más rápido repetir <code>xrange()</code> en comparación con <code>range()</code>. En Python 3, <code>range()</code> se ha implementado de la misma forma que la función <code>xrange()</code>, por lo que ya no existe una función <code>xrange()</code> específica. En su lugar, xrange() genera un NameError.</p>

    <table>
        <tr>
            <th>Python 2</th>
            <th class="hidden-sm">Python 3</th>
        </tr>
        <tr>
            <td><code> <span class="nl">n = <span class="v">1000000</span></span> <span class="nl"> <span class="o">for</span> i <span class="i">in</span> <span class="b">xrange</span>(n): <span class="nl"><span class="k">print</span> i</span> </span> </code> <samp>// 1,2,3,4,5...</samp></td>
            <th class="hidden-lg" style="border-top: 1px solid white;">Python 3</th>
            <td><code> <span class="nl">n = <span class="v">1000000</span></span> <span class="nl"> <span class="o">for</span> i <span class="i">in</span> <span class="k">range</span>(n): <span class="nl"><span class="k">print</span>(i)</span> </span> </code> <samp>// 1,2,3,4,5...</samp></td>
        </tr>
    </table>

    <h4><b>Generación y administración de excepciones</b></h4>
    <p>Allí donde Python 2 acepta ambas notaciones, la sintaxis &quot;antigua&quot; y la &quot;nueva&quot;, Python 3 genera un SyntaxError si no se incluye el argumento de excepción entre paréntesis. La administración de las excepciones también ha cambiado ligeramente en Python 3, ya que ahora se debe incluir la palabra clave &quot;as&quot;.</p>

    <table>
        <tr>
            <th>Python 2</th>
            <th class="hidden-sm">Python 3</th>
        </tr>
        <tr>
            <td><code> <span class="o">raise</span> <span class="e">IOError</span>, <span class="s">&quot;file error&quot;</span> </code> <samp>// IOError: file error</samp></td>
            <td class="hidden-lg" style="border-top: 1px solid white;">Python 3</td>
            <td><code> <span class="o">raise</span> <span class="e">IOError</span>(<span class="s">&quot;file error&quot;</span>) </code> <samp>// OSError: file error</samp></td>
        </tr>
        <tr class="spaced-sm">
            <td class="hidden-lg">Python 2</td>
            <td><code> <span class="nl"> <span class="o">try:</span> <span class="nl">let_us_cause_a_NameError</span> </span> <span class="nl"> <span class="o">except</span> <span class="e">NameError</span>, err: <span class="nl"><span class="k">print</span> err, <span class="s">'-- our error message'</span></span> </span> </code> <samp>// IOError: file error</samp></td>
            <td class="hidden-lg" style="border-top: 1px solid white;">Python 3</td>
            <td><code> <span class="nl"> <span class="o">try:</span> <span class="nl">let_us_cause_a_NameError</span> </span> <span class="nl"> <span class="o">except</span> <span class="e">NameError</span> <span class="o">as</span> err: <span class="nl"><span class="k">print</span>(err, <span class="s">'-- our error message'</span>)</span> </span> </code> <samp>// OSError: file error</samp></td>
        </tr>
    </table>
</body>
