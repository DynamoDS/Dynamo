<!--
    There are two versions of this HTML file. One that is part of the Dynamo Dictionary
    codebase and one that is part of the Dynamo codebase, used for displaying additional
    error information in the Dynamo side panel.

    These files need to kept in sync manually: if making edits to one version of the file,
    make sure to update the other version as well.

    Dynamo: https://github.com/DynamoDS/Dynamo
    Dynamo Dictionary: https://github.com/DynamoDS/DynamoDictionary_React
-->
<!-- These headers are required to force the browser embedded in the DocumentationBrowser extension to render in modern IE11 mode. -->

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width initial-scale=1">
    <meta charset="utf-8" />
</head>

<style>body { color: white; font-size: 14px; font-family: "Artifakt Element"; src: url("fonts/ArtifaktElement-Regular.woff") format("woff"); padding: 1%; } a { color: lightgray; cursor: pointer; background-color: transparent; } table { border-collapse: collapse; border: 1px solid white; } th, td { border: 1px solid white; padding-right: 10px; padding-left: 10px; padding-bottom: 10px; padding-top: 10px; } samp { margin-top: 10px; display: block; color: lightgrey; } code .k { color: #dcdcaa; font-weight: bold; } code .s { color: #ce9178; } code .v { color: #b5cea8; } code .o { color: #c586c0; font-weight: bold; } code .i { color: #569cd6; font-weight: bold; } code .b { color: #9cdcfe; font-weight: bold; } code .e { color: #43c9b0; } code  .nl .nl { padding-left: 10px; } code .nl { display: block; } thead { text-align: center; } .hidden-lg { display: none; } .button { background-color: transparent; border-color: #3c3c3c; color: #bbbbbb; } .button:hover { border-color: #656565; background-color: #373737; opacity: 1.0; } .questionmark:after { content: '?'; display: inline-block; font-family: sans-serif; font-weight: bold; text-align: center; font-size: 0.8em; line-height: 0.8em; border-radius: 50%; margin-left: 6px; padding: 0.13em 0.2em 0.09em 0.2em; color: inherit; border: 1px solid; text-decoration: none; } @media screen and (max-width: 600px) { table { width: 100%; } table, th, td { border: none; } tr { border: 1px solid white; display: block; } td, th { display: block; } .hidden-lg { display: block; font-weight: bold; text-align: center; border-bottom: 1px solid white; } .hidden-sm { display: none; } .spaced-sm { margin-top: 20px; } tbody tr:first-of-type { border-bottom: none; } }</style>

<!-- Use inline styles to keep Dynamo Dictionary styling in the dictionary -->
<!-- and custom styling in Dynamo sidepanel. -->

<body style="background-color: #353535; font-family: 'Artifakt Element', 'Open Sans';">
    <form action="https://forum.dynamobim.com/t/new-feature-preview-python-3-support-issue-thread/51649"><input type="submit" class="button" value="Python 3-Blockprobleme melden" style="font-size:medium;"/></form>
    <h2>Konvertierung von Python 2 nach Python 3</h2>
    <p>Die Python Software Foundation (PSF) hat die Unterstützung für Python 2 am 1. Januar 2020 offiziell beendet. Seit Version 2.7 ist Dynamo auf CPython3 umgestiegen, eine Python-Engine, die Zugriff auf Python 3 in Dynamo ermöglicht.</p>
   
    <h3>Warum haben wir die Python-Version geändert?</h3>
    <p>Dynamo verwendet wie viele andere C#-basierte Umgebungen das Werkzeug IronPython, um Daten zwischen .NET-Objekten und Python-Skripten zu verschieben. Da IronPython nicht auf Python 3 aktualisiert wurde, verwendet Dynamo jetzt CPython, den nativen Standard-Python-Interpreter.</p>
    <p>Durch die Umstellung von Dynamo auf Python 3 können Dynamo-Benutzer auf beliebte moderne Bibliotheken zugreifen und weiterhin neue Plattformfunktionen, grundlegende Wartungsfunktionen und Sicherheits-Patches nutzen. Darüber hinaus können Dynamo-Diagramme von Python-Bibliotheken mit nativen Erweiterungen profitieren, auf die zuvor nicht zugegriffen werden konnte, z. B. NumPy, SciPy und Pandas.</p>

    <h3>Abwärtskompatibilität</h3>
    <p>Es kann nicht garantiert werden, dass Code, der in der CPython3-Umgebung geschrieben wurde, in früheren Versionen von Dynamo verwendet werden kann. Code-Autoren sollten die Abwärtskompatibilität mit den Versionen IronPython2 und CPython3 nach Bedarf sicherstellen.</p>
    
    <h3>Was bedeutet das für Sie und Ihre Diagramme mit Python-Elementen?</h3>
    <p>Wenn Sie nicht der Autor des Diagramms oder der enthaltenen Python-Blöcke sind, wenden Sie sich an den Autor und informieren Sie ihn über diese Änderungen, damit er Änderungen vornehmen kann, wo dies erforderlich ist.</p>
    <p>Wenn Sie der Autor des Diagramms sind, lesen Sie die folgende Anleitung, um zu verstehen, wie sich diese Änderungen auf Ihre Python-Blöcke auswirken können und wie Sie Aktualisierungen vornehmen.</p>

    <p>Python 3 ist im Wesentlichen die gleiche Sprache wie Python 2, mit Änderungen an der Syntax und der Kernbibliothek, um Python konsistenter und leichter erlernbar zu machen und um verbesserte Unicode-Unterstützung zu bieten.</p>
    <p>Einige Python 2-Programme werden in Python 3 normal ausgeführt, viele gängige Entwürfe erfordern jedoch kleine Änderungen, einschließlich der Druckanweisung. Glücklicherweise können viele dieser Prozesse automatisiert werden.</p>

    <h3>So aktualisieren Sie Ihre Python-Blöcke für Python 3 </h3>
    <p>In der Regel können Python-Skripte entweder mit den IronPython2- oder CPython3-Engines ausgeführt werden. In allen Fällen, in denen das Skript Syntax enthält, die sich zwischen Versionen geändert hat, haben wir die Aktualisierung des Skripts vereinfacht, indem wir einen automatischen Codekonverter in den Python-Block des Migrationsassistenten aufgenommen haben.</p>
    <p>Öffnen Sie den Python-Block-Editor, wechseln Sie mithilfe der Dropdown-Liste zur CPython3-Engine, und klicken Sie auf das Symbol 2-3, um Ihr Skript mit dem Migrationsassistenten zu aktualisieren. Dynamo informiert Sie darüber, welche Änderungen erforderlich sind, und bietet Ihnen die Möglichkeit, die Konvertierung abzulehnen oder zu akzeptieren.</p>
    <p>Da der Block Python Script From String die Eingabe des Python-Codes lediglich ausführt und keine Texteditorumgebung bereitstellt, hat er keinen Zugriff auf den Migrationsassistenten. Wenn Sie diese Funktion verwenden möchten, müssen Sie Ihren Code vorübergehend in einen Python-Block kopieren, bevor Sie ihn wieder in den Codeblock-Block einfügen.</p>

    <h3>Weitere Informationen</h3>
    <p>Wenn Sie sich für die Unterschiede zwischen den beiden Python-Versionen interessieren, können Sie sich über diese zwei externen Links näher damit befassen:<ul>
            <li><a href="https://docs.python.org/3/howto/pyporting.html">Die offizielle Anleitung &quot;Porting Python 2 Code to Python 3&quot;</a></li>
            <li><a href="http://python3porting.com/">Anleitung &quot;Supporting Python 3: An in-depth guide&quot;</a></li>
        </ul>
    </p>

    <h3>Wichtige Syntaxänderungen in Python 3</h3>
    <p>In der folgenden Liste werden einige der wichtigsten Syntaxänderungen zwischen Python 2 und Python 3 erläutert. Dies ist eine Auswahl einiger der am häufigsten verwendeten Funktionen, die betroffen sind. Es handelt sich nicht um eine vollständige Liste.</p>


    <h4><b>Druckfunktion</b></h4>
    <p>Die Drucksyntax ist wahrscheinlich die bekannteste Änderung. Obwohl sie in Dynamo nicht häufig verwendet wird, sehen Sie in diesem Beispiel, wie sich die Anweisung <code>print</code> geändert hat.</p>

    <table>
        <tr>
            <th>Python 2</th>
            <th class="hidden-sm">Python 3</th>
        </tr>
        <tr>
            <td><code><span class="k">print</span> <span class="s">'Hello, Dynamo!'</span></code> <samp>// Hello, Dynamo!</samp></td>
            <th class="hidden-lg" style="border-top: 1px solid white;">Python 3</th>
            <td><code><span class="k">print</span>(<span class="s">'Hello, Dynamo!'</span>)</code> <samp>// Hello, Dynamo!</samp></td>
        </tr>
    </table>

    <h4><b>Ganzzahldivision</b></h4>
    <p>Durch diese Änderung werden keine Ausnahmen in Ihrem Skript angezeigt, sie kann sich jedoch auf die Ausgabe auswirken. Bei der Verwendung von ganzzahligen Operanden besteht das Vorgabeverhalten von Unterteilungsoperatoren in Python 2.x in der Verwendung einer klassischen Division, die die Dezimalstelle verkürzt und eine Ganzzahl zurückgibt. Wenn ein Paar Gleitkommaoperanden angegeben ist, wird das tatsächliche Gleitkommaverhältnis (auch als tatsächliche Unterteilung bezeichnet) zurückgegeben.</p>

    <table>
        <tr>
            <th>Python 2</th>
            <th class="hidden-sm">Python 3</th>
        </tr>
        <tr>
            <td><code><span class="v">1</span>/<span class="v">2</span></code> <samp>// 0</samp></td>
            <td class="hidden-lg" style="border-top: 1px solid white;">Python 3</td>
            <td><code><span class="v">1</span>/<span class="v">2</span></code> <samp>// 0.5</samp></td>
        </tr>
        <tr class="spaced-sm">
            <td class="hidden-lg">Python 2</td>
            <td><code><span class="v">1.0</span>/<span class="v">2.0</span></code> <samp>// 0.5</samp></td>
            <td class="hidden-lg" style="border-top: 1px solid white;">Python 3</td>
            <td><code><span class="v">1.0</span>/<span class="v">2.0</span></code> <samp>// 0.5</samp></td>
        </tr>
    </table>

    <h4><b>xrange</b></h4>
    <p><code>xrange</code> wird in der Regel in Kombination mit einer for-loop- oder list-comprehensive Anweisung verwendet. Wenn Sie nur einmal wiederholen müssen, geht es im Allgemeinen schneller, Iterationen über <code>xrange()</code> im Vergleich zu <code>range()</code> zu wiederholen. In Python 3 wurde <code>range()</code> auf die gleiche Weise wie die Funktion <code>xrange()</code> implementiert, sodass eine dedizierte <code>xrange()</code>-Funktion nicht mehr vorhanden ist. Stattdessen löst xrange() einen NameError-Wert aus.</p>

    <table>
        <tr>
            <th>Python 2</th>
            <th class="hidden-sm">Python 3</th>
        </tr>
        <tr>
            <td><code> <span class="nl">n = <span class="v">1000000</span></span> <span class="nl"> <span class="o">for</span> i <span class="i">in</span> <span class="b">xrange</span>(n): <span class="nl"><span class="k">print</span> i</span> </span> </code> <samp>// 1,2,3,4,5...</samp></td>
            <th class="hidden-lg" style="border-top: 1px solid white;">Python 3</th>
            <td><code> <span class="nl">n = <span class="v">1000000</span></span> <span class="nl"> <span class="o">for</span> i <span class="i">in</span> <span class="k">range</span>(n): <span class="nl"><span class="k">print</span>(i)</span> </span> </code> <samp>// 1,2,3,4,5...</samp></td>
        </tr>
    </table>

    <h4><b>Auslösen und Bearbeiten von Ausnahmen</b></h4>
    <p>In Python 2 werden beide Notationen akzeptiert - die 'alte' und die 'neue' Syntax. Python 3 gibt einen Syntaxfehler aus, wenn das Argument der Ausnahme nicht in Klammern eingeschlossen wird. Die Handhabung von Ausnahmen hat sich in Python 3 ebenfalls leicht geändert, wobei jetzt das Schlüsselwort &quot;as&quot; enthalten sein muss.</p>

    <table>
        <tr>
            <th>Python 2</th>
            <th class="hidden-sm">Python 3</th>
        </tr>
        <tr>
            <td><code> <span class="o">raise</span> <span class="e">IOError</span>, <span class="s">&quot;file error&quot;</span> </code> <samp>// IOError: file error</samp></td>
            <td class="hidden-lg" style="border-top: 1px solid white;">Python 3</td>
            <td><code> <span class="o">raise</span> <span class="e">IOError</span>(<span class="s">&quot;file error&quot;</span>) </code> <samp>// OSError: file error</samp></td>
        </tr>
        <tr class="spaced-sm">
            <td class="hidden-lg">Python 2</td>
            <td><code> <span class="nl"> <span class="o">try:</span> <span class="nl">let_us_cause_a_NameError</span> </span> <span class="nl"> <span class="o">except</span> <span class="e">NameError</span>, err: <span class="nl"><span class="k">print</span> err, <span class="s">'-- our error message'</span></span> </span> </code> <samp>// IOError: file error</samp></td>
            <td class="hidden-lg" style="border-top: 1px solid white;">Python 3</td>
            <td><code> <span class="nl"> <span class="o">try:</span> <span class="nl">let_us_cause_a_NameError</span> </span> <span class="nl"> <span class="o">except</span> <span class="e">NameError</span> <span class="o">as</span> err: <span class="nl"><span class="k">print</span>(err, <span class="s">'-- our error message'</span>)</span> </span> </code> <samp>// OSError: file error</samp></td>
        </tr>
    </table>
</body>
