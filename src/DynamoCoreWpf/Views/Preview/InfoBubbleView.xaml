<UserControl x:Class="Dynamo.Controls.InfoBubbleView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="clr-namespace:Dynamo.Controls"
             xmlns:viewModels="clr-namespace:Dynamo.ViewModels"
             d:DataContext="{d:DesignInstance Type=viewModels:InfoBubbleViewModel}"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:p="clr-namespace:Dynamo.Wpf.Properties"
             xmlns:ui="clr-namespace:Dynamo.UI"
             Name="InfoBubbleWindowUserControl"
             Loaded="InfoBubbleWindowUserControl_Loaded"
             mc:Ignorable="d">
    <UserControl.Resources>
        <ResourceDictionary>
            <Storyboard x:Key="fadeInStoryBoard"
                        Name="fadeInStoryBoard"
                        TargetName="mainGrid"
                        Storyboard.TargetProperty="Opacity">
                <DoubleAnimation Name="countUpDoubleAnimation"
                                 Completed="CountUpDoubleAnimation_Completed"
                                 FillBehavior="HoldEnd"
                                 From="0"
                                 To="0.95"
                                 Duration="0:0:.25" />
            </Storyboard>
            <Storyboard x:Key="fadeOutStoryBoard"
                        Name="fadeOutStoryBoard"
                        TargetName="mainGrid"
                        Storyboard.TargetProperty="Opacity">
                <DoubleAnimation Name="countDownDoubleAnimation"
                                 Completed="CountDownDoubleAnimation_Completed"
                                 FillBehavior="HoldEnd"
                                 From="0.95"
                                 To="0"
                                 Duration="0:0:.25" />
            </Storyboard>
        </ResourceDictionary>

    </UserControl.Resources>
    
    <Canvas x:Name="mainCanvas">
        <Grid x:Name="mainGrid" Margin="10">
            <Grid.Resources>
                <ResourceDictionary>
                    <ResourceDictionary.MergedDictionaries>
                        <ui:SharedResourceDictionary Source="{x:Static ui:SharedDictionaryManager.DynamoConvertersDictionaryUri}" />
                        <ui:SharedResourceDictionary Source="{x:Static ui:SharedDictionaryManager.DynamoModernDictionaryUri}" />
                    </ResourceDictionary.MergedDictionaries>
                </ResourceDictionary>
            </Grid.Resources>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>

            <DockPanel Name="nodeInformationalStateDockPanel"
                       Grid.Row="0"
                       Width="{Binding BubbleWidth, UpdateSourceTrigger=PropertyChanged}"
                       MinWidth="{Binding BubbleWidth, UpdateSourceTrigger=PropertyChanged}"
                       MaxWidth="{Binding BubbleWidth, UpdateSourceTrigger=PropertyChanged}"
                       MaxHeight="900"
                       Margin="-10,-900,0,8"
                       HorizontalAlignment="Left"
                       LastChildFill="False"
                       Visibility="{Binding DoesNodeDisplayMessages, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}">

                <!--  Little Chevron Icon  -->
                <Path Name="ChevronIcon"
                      Margin="10,-6,0,0"
                      Canvas.ZIndex="1"
                      Data="M 0,0 L 2.5,5 L 5,0"
                      DockPanel.Dock="Bottom"
                      Fill="White"
                      SnapsToDevicePixels="True"
                      Stroke="#666666"
                      Visibility="{Binding DoesNodeDisplayMessages, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}" />

                <!--  Errors  -->
                <Border Name="ErrorsBorder"
                        MaxHeight="300"
                        Margin="0,0,0,5"
                        HorizontalAlignment="Left"
                        Background="White"
                        BorderBrush="#666666"
                        BorderThickness="1"
                        CornerRadius="2"
                        DockPanel.Dock="Bottom"
                        MouseLeave="Border_OnMouseLeave"
                        MouseEnter="Border_OnMouseEnter"
                        Visibility="{Binding NodeErrorsVisible, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}">
                    <!--  Main Grid  -->
                    <Grid Margin="10,10,10,10">
                        <Grid Grid.Row="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="25" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <!--  Error Header  -->
                            <Grid Grid.Row="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="25" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="25" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <!--  Error Icon  -->
                                <Grid Grid.Row="0"
                                      Grid.Column="0"
                                      Width="25"
                                      Height="25"
                                      HorizontalAlignment="Left"
                                      VerticalAlignment="Top">
                                    <Image Source="/DynamoCoreWpf;component/UI/Images/Error.png" />
                                </Grid>
                            </Grid>
                        </Grid>
                    </Grid>
                </Border>

                <!--  Warnings  -->
                <Border Name="WarningsBorder"
                        MaxHeight="300"
                        Margin="0,0,0,5"
                        HorizontalAlignment="Left"
                        Background="White"
                        BorderBrush="#666666"
                        BorderThickness="1"
                        CornerRadius="2"
                        DockPanel.Dock="Bottom"
                        MouseEnter="Border_OnMouseEnter"
                        MouseLeave="Border_OnMouseLeave"
                        Visibility="{Binding NodeWarningsVisible, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}">
                    <!--  Main Grid  -->
                    <Grid Margin="10,10,10,10">
                        <Grid Grid.Row="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="25" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <!--  Warning Header  -->
                            <Grid Grid.Row="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="20" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="25" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <!--  Warning Icon  -->
                                <Grid Grid.Row="0"
                                      Grid.Column="0"
                                      Width="25"
                                      Height="26"
                                      HorizontalAlignment="Left"
                                      VerticalAlignment="Center">
                                    <Image Source="/DynamoCoreWpf;component/UI/Images/Warning.png" />
                                </Grid>
                            </Grid>
                        </Grid>
                    </Grid>
                </Border>

                <!--  Info  -->
                <Border Name="InfoBorder"
                        MaxHeight="300"
                        Margin="0,0,0,5"
                        HorizontalAlignment="Left"
                        Background="White"
                        BorderBrush="#666666"
                        BorderThickness="1"
                        CornerRadius="2"
                        DockPanel.Dock="Bottom"
                        MouseEnter="Border_OnMouseEnter"
                        MouseLeave="Border_OnMouseLeave"
                        Visibility="{Binding NodeInfoVisible, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}">
                    <!--  Main Grid  -->
                    <Grid Margin="10,10,10,10">
                        <Grid Grid.Row="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="25" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <!--  Info Header  -->
                            <Grid Grid.Row="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="25" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="25" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <!--  Info Icon  -->
                                <Grid Grid.Row="0"
                                      Grid.Column="0"
                                      Width="25"
                                      Height="26"
                                      HorizontalAlignment="Left"
                                      VerticalAlignment="Top">
                                    <Image Width="25"
                                           Height="25"
                                           Source="/DynamoCoreWpf;component/UI/Images/Info.png"
                                           Stretch="UniformToFill" />
                                </Grid>
                            </Grid>
                        </Grid>
                    </Grid>
                </Border>
            </DockPanel>
            <Polygon Name="backgroundPolygon"
                     Grid.Row="0"
                     Grid.RowSpan="3"
                     RenderOptions.EdgeMode="Aliased"
                     Visibility="Collapsed" />
        </Grid>
    </Canvas>
</UserControl>
