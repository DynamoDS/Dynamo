<Workspace Version="0.6.2.29585" X="0" Y="0" zoom="1" Description="Query a SQLite database." Category="Input/Output.File" Name="Slingshot! SQLite Query" ID="9c056ff8-b283-48f1-af1a-676d8251b0bb">
  <Elements>
    <Dynamo.Nodes.NewList type="Dynamo.Nodes.NewList" guid="5375a1d3-86b8-4191-aa1c-60e103692052" nickname="List" x="250" y="0" isVisible="true" isUpstreamVisible="true" lacing="Disabled">
      <Input name="index0" />
      <Input name="index1" />
      <Input name="index2" />
    </Dynamo.Nodes.NewList>
    <Dynamo.Nodes.Python type="Dynamo.Nodes.Python" guid="683aa4c8-e226-462f-8183-9a7c4b7c28f3" nickname="Python Script" x="424.615384615385" y="0" isVisible="true" isUpstreamVisible="true" lacing="Disabled">
      <Script>#Slingshot! for Dynamo
#An Open Source project by Nathan Miller
#http://TheProvingGround.org

# Default imports
import clr
clr.AddReference('RevitAPI')
clr.AddReference('RevitAPIUI')
from Autodesk.Revit.DB import *
import Autodesk
import sys
import clr
path = r'C:\Autodesk\Dynamo\Core'
exec_path = r'C:\Autodesk\Dynamo\Core\dll'
sys.path.append(path)
sys.path.append(exec_path)
clr.AddReference('LibGNet')
from Autodesk.LibG import *

clr.AddReference('System.Data')
from System import Data
from System.Data import DataSet
from System.Data import DataTable

#Reference to System.Data.SQLite library
clr.AddReference('System.Data.SQLite.dll')
from System.Data.SQLite import *
import System.Data.SQLite

#The input to this node will be stored in the IN variable.
connect = IN[0]
filepath = IN[1]
query = IN[2]

status = []
result = []

#SQLite Connection
SQLConnect = System.Data.SQLite.SQLiteConnection()
SQLConnect.ConnectionString = 'Data Source=' + filepath
SQLConnect.Open()
status.append(SQLConnect.State.ToString())

#SQLite Query
SQLquery = SQLiteDataAdapter(query,SQLConnect)
status.append(query)

#Fill DataSet
SQLDataset = System.Data.DataSet()
SQLquery.Fill(SQLDataset)

#Close Connection
SQLConnect.Close()
status.append(SQLConnect.State.ToString())

#Iterate through Datatable
SQLDatatable = SQLDataset.Tables[0]
for i in range(0,SQLDatatable.Columns.Count):
	row = []
	for j in range(0,SQLDatatable.Rows.Count):
		value = SQLDatatable.Rows[j][i]
		row.append(value)
	result.append(row)

#Assign your output to the OUT variable
OUT = result</Script>
    </Dynamo.Nodes.Python>
    <Dynamo.Nodes.Symbol type="Dynamo.Nodes.Symbol" guid="21dfed6d-1615-4bba-b627-64dbc29fad0d" nickname="Input" x="0" y="0" isVisible="true" isUpstreamVisible="true" lacing="Disabled">
      <Symbol value="Connect" />
    </Dynamo.Nodes.Symbol>
    <Dynamo.Nodes.Symbol type="Dynamo.Nodes.Symbol" guid="e83afa3d-ee28-43a2-a6e6-a46fca620c0a" nickname="Input" x="0" y="150" isVisible="true" isUpstreamVisible="true" lacing="Disabled">
      <Symbol value="Path" />
    </Dynamo.Nodes.Symbol>
    <Dynamo.Nodes.Symbol type="Dynamo.Nodes.Symbol" guid="14ea55c0-f5e4-44a7-b4b0-843600ba35b6" nickname="Input" x="0" y="300" isVisible="true" isUpstreamVisible="true" lacing="Disabled">
      <Symbol value="Query" />
    </Dynamo.Nodes.Symbol>
    <Dynamo.Nodes.Output type="Dynamo.Nodes.Output" guid="eaddcaf3-46a0-4ebf-acf5-36823b892785" nickname="Output" x="605.615384615385" y="0" isVisible="true" isUpstreamVisible="true" lacing="Disabled">
      <Symbol value="Result" />
    </Dynamo.Nodes.Output>
  </Elements>
  <Connectors>
    <Dynamo.Models.ConnectorModel start="5375a1d3-86b8-4191-aa1c-60e103692052" start_index="0" end="683aa4c8-e226-462f-8183-9a7c4b7c28f3" end_index="0" portType="0" />
    <Dynamo.Models.ConnectorModel start="683aa4c8-e226-462f-8183-9a7c4b7c28f3" start_index="0" end="eaddcaf3-46a0-4ebf-acf5-36823b892785" end_index="0" portType="0" />
    <Dynamo.Models.ConnectorModel start="21dfed6d-1615-4bba-b627-64dbc29fad0d" start_index="0" end="5375a1d3-86b8-4191-aa1c-60e103692052" end_index="0" portType="0" />
    <Dynamo.Models.ConnectorModel start="e83afa3d-ee28-43a2-a6e6-a46fca620c0a" start_index="0" end="5375a1d3-86b8-4191-aa1c-60e103692052" end_index="1" portType="0" />
    <Dynamo.Models.ConnectorModel start="14ea55c0-f5e4-44a7-b4b0-843600ba35b6" start_index="0" end="5375a1d3-86b8-4191-aa1c-60e103692052" end_index="2" portType="0" />
  </Connectors>
  <Notes />
</Workspace>